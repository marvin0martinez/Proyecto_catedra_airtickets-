<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AirTickets</title>
  <link rel="stylesheet" href="assets/styles.css" />
  <style>
    /* Hacer el contenido principal desplazable */
    .shell {
      height: 100vh;
      overflow: hidden;
    }

    .content {
      overflow-y: auto;
      height: calc(100vh - 80px);
      padding: 20px;
    }

    .flight-details {
      background: #f8f9fa;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 20px;
      border: 1px solid #e9ecef;
    }
    .flight-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }
    .flight-airline-info {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .airline-logo {
      width: 32px;
      height: 32px;
      border-radius: 4px;
      object-fit: contain;
    }
    .flight-airline {
      font-weight: 600;
      font-size: 18px;
      color: #1a56db;
    }
    .flight-price {
      font-weight: 800;
      font-size: 22px;
      color: #16a34a;
    }
    .flight-route {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 8px;
    }
    .flight-times {
      display: flex;
      align-items: center;
      gap: 20px;
      width: 100%;
      justify-content: center;
    }
    .flight-time {
      text-align: center;
      flex: 1;
    }
    .time-main {
      font-weight: 700;
      font-size: 16px;
    }
    .time-city {
      font-size: 12px;
      color: #666;
    }
    .flight-duration {
      text-align: center;
      color: #666;
      font-size: 12px;
      min-width: 80px;
    }
    .flight-info {
      display: flex;
      gap: 16px;
      margin-top: 8px;
      font-size: 12px;
      color: #666;
      flex-wrap: wrap;
    }
    .flight-info-item {
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .required-field::after {
      content: " *";
      color: #dc2626;
    }
    .flight-type-badge {
      background: #e0f2fe;
      color: #0369a1;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 11px;
      margin-left: 8px;
    }
    .flight-combined {
      background: #f0f9ff;
      border-left: 3px solid #0ea5e9;
    }
    .flight-code-display {
      font-size: 12px;
      color: #666;
      margin-top: 2px;
    }

    /* Estilos para formularios de pasajeros */
    .pasajero-section {
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 20px;
      background-color: #f9f9f9;
    }

    .pasajero-title {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 15px;
      color: #8e24aa;
      border-bottom: 1px solid #e0e0e0;
      padding-bottom: 8px;
    }

    .form-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 16px;
      margin-bottom: 16px;
    }

    .label {
      font-weight: 500;
      margin-bottom: 6px;
      display: block;
    }

    .input, .select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
      box-sizing: border-box;
    }

    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 500;
      text-decoration: none;
      display: inline-block;
      text-align: center;
    }

    .btn.secondary {
      background-color: #6c757d;
      color: white;
    }

    .btn.primary {
      background-color: #8e24aa;
      color: white;
    }

    .right {
      float: right;
    }

    .card {
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      padding: 20px;
      margin-bottom: 20px;
    }

    .row {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }

    /* Espacio adicional al final para permitir scroll */
    .spacer {
      height: 50px;
    }
  </style>
</head>
<body>
<div class="shell">
  <header class="header">
    <div class="brand">
      <div class="brand-badge">‚úà</div>
      <div>
        <div class="brand-title">AirTickets</div>
        <div class="brand-sub">Admin</div>
      </div>
    </div>
  </header>
  <aside class="sidebar">
    <nav class="nav">
      <a href="index.html" class=""><span class="icon">üè†</span><span>Inicio</span></a>
      <a href="buscar.html" class="active"><span class="icon">‚úàÔ∏è</span><span>Vuelos</span></a>
      <a href="reservas.html" class=""><span class="icon">üìñ</span><span>Reservaciones</span></a>
      <a href="aerolineas.html" class=""><span class="icon">üõ©Ô∏è</span><span>Aerol√≠neas</span></a>
      <a href="estadisticas.html" class=""><span class="icon">üìä</span><span>Estad√≠sticas</span></a>
      <a href="reclamos.html" class=""><span class="icon">üí¨</span><span>Reclamos</span></a>
    </nav>
  </aside>
  <main class="content">
    <div class="card">
      <!-- Informaci√≥n din√°mica del vuelo -->
      <div id="flightDetails" class="flight-details">
        <div class="flight-header">
          <div class="flight-airline-info">
            <img id="airlineLogo" class="airline-logo" src="" alt="Logo aerol√≠nea">
            <div>
              <div class="flight-airline" id="flightAirline">Cargando informaci√≥n del vuelo...</div>
              <div class="flight-code-display" id="flightCode">C√≥digo: -</div>
            </div>
          </div>
          <div class="flight-price" id="flightPrice">-</div>
        </div>
        <div class="flight-route">
          <div class="flight-times">
            <div class="flight-time">
              <div class="time-main" id="departureTime">--:--</div>
              <div class="time-city" id="originCity">Origen</div>
            </div>
            <div class="flight-duration">
              <div>‚è±</div>
              <div id="flightDuration">-</div>
            </div>
            <div class="flight-time">
              <div class="time-main" id="arrivalTime">--:--</div>
              <div class="time-city" id="destinationCity">Destino</div>
            </div>
          </div>
        </div>
        <div class="flight-info">
          <div class="flight-info-item">
            <span>üõ©Ô∏è</span>
            <span id="flightAircraft">Avi√≥n: -</span>
          </div>
          <div class="flight-info-item">
            <span>üë•</span>
            <span id="flightPassengers">Pasajeros: -</span>
          </div>
          <div class="flight-info-item">
            <span>üìÖ</span>
            <span id="flightDate">Fecha: -</span>
          </div>
          <div id="flightTypeBadge" class="flight-info-item"></div>
        </div>
        <div id="additionalInfo" class="flight-info"></div>
      </div>

      <form id="formPasajeros">
        <div id="seccionesPasajeros">
          <!-- Las secciones de pasajeros se generar√°n din√°micamente aqu√≠ -->
        </div>
        <div class="row" style="margin-top:16px">
          <a class="btn secondary" href="buscar.html">Volver</a>
          <button type="submit" class="btn primary right">Continuar a Resumen</button>
        </div>
      </form>
    </div>

    <!-- Espacio adicional para permitir scroll suave -->
    <div class="spacer"></div>
  </main>
</div>

<script>
  // Datos de aeropuertos
  const aeropuertos = [
    { code: 'BOG', city: 'Bogot√°', country: 'Colombia' },
    { code: 'MDE', city: 'Medell√≠n', country: 'Colombia' },
    { code: 'CLO', city: 'Cali', country: 'Colombia' },
    { code: 'BAQ', city: 'Barranquilla', country: 'Colombia' },
    { code: 'SAL', city: 'San Salvador', country: 'El Salvador' },
    { code: 'MIA', city: 'Miami', country: 'USA' },
    { code: 'PTY', city: 'Panama City', country: 'Panama' },
    { code: 'LAS', city: 'Las Vegas', country: 'USA' },
    { code: 'MAD', city: 'Madrid', country: 'Espa√±a' },
    { code: 'LIM', city: 'Lima', country: 'Per√∫' },
    { code: 'MEX', city: 'Ciudad de M√©xico', country: 'M√©xico' },
    { code: 'CDG', city: 'Par√≠s', country: 'Francia' },
    { code: 'JFK', city: 'Nueva York', country: 'USA' },
    { code: 'CUN', city: 'Canc√∫n', country: 'M√©xico' },
    { code: 'GDL', city: 'Guadalajara', country: 'M√©xico' },
    { code: 'TIJ', city: 'Tijuana', country: 'M√©xico' },
    { code: 'MTY', city: 'Monterrey', country: 'M√©xico' }
  ];

  // Datos de aerol√≠neas con logos
  const aerolineas = [
    {
      id: 'delta',
      name: 'Delta Air',
      logo: 'https://s7d1.scene7.com/is/image/LippincottDM/Delta_03?fmt=webp&qlt=100'
    },
    {
      id: 'avianca',
      name: 'Avianca',
      logo: 'https://volavi.co/wp-content/uploads/2023/10/Nuevo-Logo_avianca-Octubre2023.jpg.webp'
    },
    {
      id: 'latam',
      name: 'LATAM',
      logo: 'https://photos.prnewswire.com/prnfull/20160428/361126LOGO'
    },
    {
      id: 'iberia',
      name: 'Iberia',
      logo: 'https://www.marcasrenombradas.com/wp-content/uploads/2011/08/Iberia.jpg'
    },
    {
      id: 'american',
      name: 'America Airlines',
      logo: 'https://assets.simpleviewinc.com/simpleview/image/upload/c_fill,h_1600,q_75,w_2400/v1/crm/tampabay/aArtboard-2_A737B76A-0BA5-49DB-F9DED6318A7C739C-a737b673bde148e_a737c1d3-f5a4-fa12-33635b09ca5fb2dd.jpg'
    },
    {
      id: 'qatar',
      name: 'Qatar Air',
      logo: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRD6OnNpaAsEqTYRCRYrG2qUB-ZPT9HzDiKBQ&s'
    },
    {
      id: 'emirates',
      name: 'Emirates Airways',
      logo: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSMWa43g3R335BROGk-pdEjAWqU6W1J9KaGlg&s'
    },
    {
      id: 'volaris',
      name: 'Volaris',
      logo: 'https://mir-s3-cdn-cf.behance.net/project_modules/fs_webp/6ce67d27128795.563602c83a3fc.jpg'
    }
  ];

  // Funci√≥n para obtener el vuelo seleccionado desde sessionStorage
  function obtenerVueloSeleccionado(flightId) {
    // Intentar obtener del sessionStorage primero
    const vueloGuardado = sessionStorage.getItem('vueloSeleccionado');
    if (vueloGuardado) {
      const vuelos = JSON.parse(vueloGuardado);
      return vuelos.find(v => v.id.toString() === flightId || v.id === flightId);
    }

    // Si no est√° en sessionStorage, usar datos por defecto
    const vuelosPorDefecto = [
      {
        id: 1,
        code: 'AV-101',
        airline: 'Avianca',
        airlineId: 'avianca',
        aircraft: 'Boeing 787-8 Dreamliner',
        origin: 'BOG',
        destination: 'MAD',
        departureTime: '14:30',
        arrivalTime: '06:45',
        duration: '9h 15m',
        price: 1850000,
        availableSeats: 45,
        flightType: 'directo'
      },
      {
        id: 2,
        code: 'IB-609',
        airline: 'Iberia',
        airlineId: 'iberia',
        aircraft: 'Airbus A350-900',
        origin: 'MAD',
        destination: 'MEX',
        departureTime: '22:15',
        arrivalTime: '14:30',
        duration: '12h 15m',
        price: 2920000,
        availableSeats: 28,
        flightType: 'directo'
      }
    ];

    return vuelosPorDefecto.find(v => v.id.toString() === flightId || v.id === flightId) || vuelosPorDefecto[0];
  }

  document.addEventListener('DOMContentLoaded', function() {
    // Obtener par√°metros de la URL
    const urlParams = new URLSearchParams(window.location.search);
    const flightId = urlParams.get('flight');
    const passengers = urlParams.get('passengers');

    console.log('Par√°metros URL:', { flightId, passengers }); // Debug

    // Obtener datos de b√∫squeda de sessionStorage
    const busquedaGuardada = sessionStorage.getItem('busqueda');
    let datosBusqueda = null;

    if (busquedaGuardada) {
      datosBusqueda = JSON.parse(busquedaGuardada);
    }

    // Buscar informaci√≥n del vuelo
    let vueloSeleccionado = null;

    if (flightId) {
      if (flightId.startsWith('combinado-')) {
        // Es un vuelo combinado
        vueloSeleccionado = crearVueloCombinado(flightId);
      } else {
        // Es un vuelo directo
        vueloSeleccionado = obtenerVueloSeleccionado(flightId);
      }
    }

    // Si no se encuentra el vuelo, usar uno por defecto
    if (!vueloSeleccionado) {
      vueloSeleccionado = obtenerVueloSeleccionado('1'); // Vuelo por defecto
    }

    console.log('Vuelo seleccionado:', vueloSeleccionado); // Debug

    // Actualizar la interfaz con la informaci√≥n del vuelo
    actualizarInformacionVuelo(vueloSeleccionado, passengers, datosBusqueda);

    // Generar formularios din√°micos para cada pasajero
    generarFormulariosPasajeros(passengers || 1);

    // Configurar el env√≠o del formulario
    configurarEnvioFormulario(vueloSeleccionado, passengers);
  });

  // Funci√≥n para generar formularios din√°micos para cada pasajero
  function generarFormulariosPasajeros(numPasajeros) {
    const seccionesPasajeros = document.getElementById('seccionesPasajeros');
    seccionesPasajeros.innerHTML = '';

    for (let i = 1; i <= numPasajeros; i++) {
      const pasajeroSection = document.createElement('div');
      pasajeroSection.className = 'pasajero-section';

      pasajeroSection.innerHTML = `
        <div class="pasajero-title">Pasajero ${i}</div>
        <div class="form-row">
          <div>
            <div class="label required-field">Nombre Completo</div>
            <input name="nombre${i}" class="input" placeholder="Nombre completo como aparece en el pasaporte" required />
          </div>
          <div>
            <div class="label required-field">Fecha de Nacimiento</div>
            <input name="fechaNacimiento${i}" type="date" class="input" required />
          </div>
        </div>
        <div class="form-row">
          <div>
            <div class="label required-field">N√∫mero de Pasaporte</div>
            <input name="pasaporte${i}" class="input" placeholder="N√∫mero de pasaporte" required />
          </div>
          <div>
            <div class="label required-field">Preferencia de Asiento</div>
            <select name="preferenciaAsiento${i}" class="select" required>
              <option value="">Seleccione una opci√≥n</option>
              <option value="Pasillo">Pasillo</option>
              <option value="Ventana">Ventana</option>
              <option value="Centro">Centro</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div>
            <div class="label required-field">Correo Electr√≥nico</div>
            <input name="email${i}" type="email" class="input" placeholder="correo@ejemplo.com" required />
          </div>
          <div>
            <div class="label required-field">Tel√©fono de Contacto</div>
            <input name="telefono${i}" class="input" placeholder="+1234567890" required />
          </div>
        </div>
      `;

      seccionesPasajeros.appendChild(pasajeroSection);
    }
  }

  // Funci√≥n para configurar el env√≠o del formulario
  function configurarEnvioFormulario(vuelo, numPasajeros) {
    const form = document.getElementById('formPasajeros');

    form.addEventListener('submit', function(e) {
      e.preventDefault();

      let formularioValido = true;
      const errores = [];

      // Validar cada pasajero
      for (let i = 1; i <= numPasajeros; i++) {
        const nombre = document.querySelector(`input[name="nombre${i}"]`).value;
        const fechaNacimiento = document.querySelector(`input[name="fechaNacimiento${i}"]`).value;
        const pasaporte = document.querySelector(`input[name="pasaporte${i}"]`).value;
        const preferenciaAsiento = document.querySelector(`select[name="preferenciaAsiento${i}"]`).value;
        const email = document.querySelector(`input[name="email${i}"]`).value;
        const telefono = document.querySelector(`input[name="telefono${i}"]`).value;

        // Validar que todos los campos est√©n completos
        if (!nombre || !fechaNacimiento || !pasaporte || !preferenciaAsiento || !email || !telefono) {
          formularioValido = false;
          errores.push(`Por favor, complete todos los campos obligatorios para el pasajero ${i}.`);
          continue;
        }

        // Validar formato del pasaporte (solo n√∫meros)
        if (!/^\d+$/.test(pasaporte)) {
          formularioValido = false;
          errores.push(`El n√∫mero de pasaporte del pasajero ${i} debe contener solo n√∫meros.`);
        }

        // Validar fecha de nacimiento (no puede ser futura)
        const fechaNac = new Date(fechaNacimiento);
        const hoy = new Date();
        if (fechaNac > hoy) {
          formularioValido = false;
          errores.push(`La fecha de nacimiento del pasajero ${i} no puede ser futura.`);
        }

        // Validar formato de email
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
          formularioValido = false;
          errores.push(`El correo electr√≥nico del pasajero ${i} no tiene un formato v√°lido.`);
        }
      }

      if (!formularioValido) {
        alert('Errores en el formulario:\n\n' + errores.join('\n'));
        return;
      }

      // Si todo est√° correcto, guardar datos y redirigir
      const datosPasajeros = [];
      for (let i = 1; i <= numPasajeros; i++) {
        datosPasajeros.push({
          nombre: document.querySelector(`input[name="nombre${i}"]`).value,
          fechaNacimiento: document.querySelector(`input[name="fechaNacimiento${i}"]`).value,
          pasaporte: document.querySelector(`input[name="pasaporte${i}"]`).value,
          preferenciaAsiento: document.querySelector(`select[name="preferenciaAsiento${i}"]`).value,
          email: document.querySelector(`input[name="email${i}"]`).value,
          telefono: document.querySelector(`input[name="telefono${i}"]`).value
        });
      }

      // Guardar datos en sessionStorage
      sessionStorage.setItem('vueloSeleccionado', JSON.stringify(vuelo));
      sessionStorage.setItem('datosPasajeros', JSON.stringify(datosPasajeros));

      // Redirigir a la p√°gina de resumen
      window.location.href = 'resumen.html';
    });
  }

  // Funci√≥n para crear vuelo combinado
  function crearVueloCombinado(flightId) {
    const partes = flightId.split('-');
    const id1 = parseInt(partes[1]);
    const id2 = parseInt(partes[2]);

    const vuelo1 = obtenerVueloSeleccionado(id1.toString());
    const vuelo2 = obtenerVueloSeleccionado(id2.toString());

    if (vuelo1 && vuelo2) {
      return {
        id: flightId,
        code: `${vuelo1.code} + ${vuelo2.code}`,
        airline: `${vuelo1.airline} + ${vuelo2.airline}`,
        airlineId: 'combinado',
        aircraft: `${vuelo1.aircraft} / ${vuelo2.aircraft}`,
        origin: vuelo1.origin,
        destination: vuelo2.destination,
        departureTime: vuelo1.departureTime,
        arrivalTime: vuelo2.arrivalTime,
        duration: calcularDuracionCombinada(vuelo1.duration, vuelo2.duration),
        price: Math.round((vuelo1.price + vuelo2.price) * 0.9),
        availableSeats: Math.min(vuelo1.availableSeats, vuelo2.availableSeats),
        flightType: 'combinado',
        escala: true,
        conexion: vuelo1.destination
      };
    }
    return null;
  }

  // Funci√≥n para actualizar la informaci√≥n del vuelo en la interfaz
  function actualizarInformacionVuelo(vuelo, numPasajeros, datosBusqueda) {
    // Informaci√≥n de aeropuertos
    const origenInfo = aeropuertos.find(a => a.code === vuelo.origin);
    const destinoInfo = aeropuertos.find(a => a.code === vuelo.destination);

    // Obtener informaci√≥n de la aerol√≠nea
    let aerolineaInfo = null;
    if (vuelo.airlineId !== 'combinado') {
      aerolineaInfo = aerolineas.find(a => a.id === vuelo.airlineId);
    }

    // Actualizar logo de aerol√≠nea
    const airlineLogo = document.getElementById('airlineLogo');
    if (aerolineaInfo && aerolineaInfo.logo) {
      airlineLogo.src = aerolineaInfo.logo;
      airlineLogo.alt = vuelo.airline;
      airlineLogo.style.display = 'block';
    } else if (vuelo.airlineId === 'combinado') {
      airlineLogo.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iNCIgZmlsbD0iI2YwZjBmMCIvPgo8dGV4dCB4PSIxNiIgeT0iMTgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzY2NiI+4pawK+KWsTwvdGV4dD4KPC9zdmc+';
      airlineLogo.alt = 'Vuelo combinado';
      airlineLogo.style.display = 'block';
    } else {
      airlineLogo.style.display = 'none';
    }

    // Actualizar elementos de la interfaz
    document.getElementById('flightAirline').textContent = vuelo.airline;
    document.getElementById('flightCode').textContent = `C√≥digo: ${vuelo.code}`;
    document.getElementById('flightPrice').textContent = `$${vuelo.price.toLocaleString()}`;
    document.getElementById('departureTime').textContent = vuelo.departureTime;
    document.getElementById('arrivalTime').textContent = vuelo.arrivalTime;
    document.getElementById('originCity').textContent = `${origenInfo.city} (${origenInfo.code})`;
    document.getElementById('destinationCity').textContent = `${destinoInfo.city} (${destinoInfo.code})`;
    document.getElementById('flightDuration').textContent = vuelo.duration;
    document.getElementById('flightAircraft').textContent = `Avi√≥n: ${vuelo.aircraft}`;
    document.getElementById('flightPassengers').textContent = `Pasajeros: ${numPasajeros || 1}`;

    // Actualizar fecha del vuelo
    const fechaElement = document.getElementById('flightDate');
    if (datosBusqueda && datosBusqueda.fecha) {
      const fechaFormateada = new Date(datosBusqueda.fecha).toLocaleDateString('es-ES', {
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      });
      fechaElement.textContent = `Fecha: ${fechaFormateada}`;
      fechaElement.style.display = 'flex';
    } else {
      fechaElement.style.display = 'none';
    }

    // Actualizar tipo de vuelo
    const typeBadge = document.getElementById('flightTypeBadge');
    typeBadge.innerHTML = '';

    if (vuelo.flightType === 'directo') {
      typeBadge.innerHTML = '<span class="flight-type-badge">‚úàÔ∏è Vuelo directo</span>';
    } else if (vuelo.flightType === 'combinado') {
      typeBadge.innerHTML = '<span class="flight-type-badge">üîÑ Vuelo con escala</span>';
      // A√±adir estilo especial para vuelos combinados
      document.getElementById('flightDetails').classList.add('flight-combined');
    }

    // Informaci√≥n adicional para vuelos con escala
    const additionalInfo = document.getElementById('additionalInfo');
    additionalInfo.innerHTML = '';

    if (vuelo.escala && vuelo.conexion) {
      const conexionInfo = aeropuertos.find(a => a.code === vuelo.conexion);
      if (conexionInfo) {
        const escalaItem = document.createElement('div');
        escalaItem.className = 'flight-info-item';
        escalaItem.innerHTML = `<span>‚è±</span><span>Escala en ${conexionInfo.city} (${vuelo.conexion}) - 2h</span>`;
        additionalInfo.appendChild(escalaItem);
      }
    }

    // Informaci√≥n de asientos disponibles
    const seatsItem = document.createElement('div');
    seatsItem.className = 'flight-info-item';
    seatsItem.innerHTML = `<span>üí∫</span><span>${vuelo.availableSeats} asientos disponibles</span>`;
    additionalInfo.appendChild(seatsItem);
  }

  // Funci√≥n para calcular duraci√≥n combinada (para vuelos con escala)
  function calcularDuracionCombinada(duracion1, duracion2) {
    const regex = /(\d+)h\s*(\d+)m/;
    const match1 = duracion1.match(regex);
    const match2 = duracion2.match(regex);

    let horas = 0;
    let minutos = 0;

    if (match1) {
      horas += parseInt(match1[1]);
      minutos += parseInt(match1[2]);
    }

    if (match2) {
      horas += parseInt(match2[1]);
      minutos += parseInt(match2[2]);
    }

    // A√±adir 2 horas para la escala
    horas += 2;

    // Ajustar horas y minutos
    horas += Math.floor(minutos / 60);
    minutos = minutos % 60;

    return `${horas}h ${minutos}m`;
  }
</script>
</body>
</html>